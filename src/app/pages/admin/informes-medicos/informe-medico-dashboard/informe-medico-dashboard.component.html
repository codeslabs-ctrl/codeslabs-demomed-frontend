<div class="informes-page">
  <!-- Page Header -->
  <div class="page-header">
    <h1>
      <i class="fas fa-file-medical"></i>
      Informes Médicos
    </h1>
    <button class="btn-new" (click)="crearInforme()">
      <i class="fas fa-plus"></i>
      Nuevo Informe
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando informes médicos...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <div class="error-message">
      <i class="fas fa-exclamation-triangle"></i>
      {{ error }}
    </div>
    <button class="btn-primary" (click)="cargarInformes()">
      <i class="fas fa-refresh"></i>
      Reintentar
    </button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && informes.length === 0" class="empty-state">
    <i class="fas fa-file-medical"></i>
    <h3>No hay informes médicos</h3>
    <p>Comienza creando tu primer informe médico</p>
    <button class="btn-primary" (click)="crearInforme()">
      <i class="fas fa-plus"></i>
      Crear Primer Informe
    </button>
  </div>

  <!-- Informes Table -->
  <div *ngIf="!loading && !error && informes.length > 0" class="informes-table">
    <table class="table">
      <thead>
        <tr>
          <th>Número</th>
          <th>Título</th>
          <th>Paciente</th>
          <th>Médico</th>
          <th>Estado</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let informe of informes">
          <td>
            <span class="numero-badge">{{ informe.numero_informe }}</span>
          </td>
          <td>{{ informe.titulo || 'Sin título' }}</td>
          <td>
            <div class="paciente-info">
              <div class="nombre">{{ informe.pacientes?.nombres }} {{ informe.pacientes?.apellidos }}</div>
              <div class="cedula">{{ informe.pacientes?.cedula }}</div>
            </div>
          </td>
          <td>Dr. {{ informe.medicos?.nombres }} {{ informe.medicos?.apellidos }}</td>
          <td>
            <span class="estado-badge" [ngClass]="informe.estado">
              {{ getEstadoTexto(informe.estado) }}
            </span>
          </td>
          <td>{{ formatearFecha(informe.fecha_creacion) }}</td>
          <td>
            <div class="action-buttons">
              <button 
                class="action-btn btn-warning" 
                (click)="reenviarEmail(informe)"
                title="Reenviar Email">
                <svg class="action-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
                Reenviar
              </button>
              <button 
                class="action-btn edit-btn" 
                (click)="editarInforme(informe)"
                title="Editar Informe">
                <svg class="action-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                </svg>
                Editar
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>